{
  "version": 3,
  "sources": ["utils.ts"],
  "sourcesContent": ["import * as fs from 'fs';\nimport * as path from 'path';\nimport { SymlinkFollowMode } from './options';\n\n/**\n * Determines whether a symlink should be followed or not, based on a FollowMode.\n *\n * @param mode       the FollowMode.\n * @param sourceRoot the root of the source tree.\n * @param realPath   the real path of the target of the symlink.\n *\n * @returns true if the link should be followed.\n */\nexport function shouldFollow(mode: SymlinkFollowMode, sourceRoot: string, realPath: string): boolean {\n  switch (mode) {\n    case SymlinkFollowMode.ALWAYS:\n      return fs.existsSync(realPath);\n    case SymlinkFollowMode.EXTERNAL:\n      return !_isInternal() && fs.existsSync(realPath);\n    case SymlinkFollowMode.BLOCK_EXTERNAL:\n      return _isInternal() && fs.existsSync(realPath);\n    case SymlinkFollowMode.NEVER:\n      return false;\n    default:\n      throw new Error(`Unsupported FollowMode: ${mode}`);\n  }\n\n  function _isInternal(): boolean {\n    return path.resolve(realPath).startsWith(path.resolve(sourceRoot));\n  }\n}\n"],
  "mappings": "gGAAA,KAAA,IAAA,QAAA,MACA,KAAA,QAAA,QACA,UAAA,QAAA,aAWA,sBAA6B,KAAyB,WAAoB,SAAgB,CACxF,OAAQ,UACD,WAAA,kBAAkB,OACrB,MAAO,IAAG,WAAW,cAClB,WAAA,kBAAkB,SACrB,MAAO,CAAC,eAAiB,GAAG,WAAW,cACpC,WAAA,kBAAkB,eACrB,MAAO,gBAAiB,GAAG,WAAW,cACnC,WAAA,kBAAkB,MACrB,MAAO,WAEP,KAAM,IAAI,OAAM,2BAA2B,QAG/C,sBAAoB,CAClB,MAAO,MAAK,QAAQ,UAAU,WAAW,KAAK,QAAQ,cAf1D,QAAA,aAAA",
  "names": []
}
