{
  "version": 3,
  "sources": ["auth-token.ts"],
  "sourcesContent": ["import * as iam from '../../aws-iam';\n\n/**\n * Authorization token to access private ECR repositories in the current environment via Docker CLI.\n *\n * @see https://docs.aws.amazon.com/AmazonECR/latest/userguide/registry_auth.html\n */\nexport class AuthorizationToken {\n  /**\n   * Grant access to retrieve an authorization token.\n   */\n  public static grantRead(grantee: iam.IGrantable) {\n    grantee.grantPrincipal.addToPrincipalPolicy(new iam.PolicyStatement({\n      actions: ['ecr:GetAuthorizationToken'],\n      // GetAuthorizationToken only allows '*'. See https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonelasticcontainerregistry.html#amazonelasticcontainerregistry-actions-as-permissions\n      resources: ['*'],\n    }));\n  }\n\n  private constructor() {\n  }\n}\n\n/**\n * Authorization token to access the global public ECR Gallery via Docker CLI.\n *\n * @see https://docs.aws.amazon.com/AmazonECR/latest/public/public-registries.html#public-registry-auth\n */\nexport class PublicGalleryAuthorizationToken {\n\n  /**\n   * Grant access to retrieve an authorization token.\n   */\n  public static grantRead(grantee: iam.IGrantable) {\n    grantee.grantPrincipal.addToPrincipalPolicy(new iam.PolicyStatement({\n      actions: ['ecr-public:GetAuthorizationToken', 'sts:GetServiceBearerToken'],\n      // GetAuthorizationToken only allows '*'. See https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonelasticcontainerregistry.html#amazonelasticcontainerregistry-actions-as-permissions\n      // GetServiceBearerToken only allows '*'. See https://docs.aws.amazon.com/service-authorization/latest/reference/list_awssecuritytokenservice.html#awssecuritytokenservice-actions-as-permissions\n      resources: ['*'],\n    }));\n  }\n\n  private constructor() {\n  }\n\n}\n"],
  "mappings": "oQAAA,IAAA,QAAA,iBAOA,wBAA+B,CAY7B,aAAA,QARc,WAAU,QAAuB,iEAC7C,QAAQ,eAAe,qBAAqB,GAAI,KAAI,gBAAgB,CAClE,QAAS,CAAC,6BAEV,UAAW,CAAC,SARlB,QAAA,mBAAA,gIAqBA,qCAA4C,CAc1C,aAAA,QATc,WAAU,QAAuB,iEAC7C,QAAQ,eAAe,qBAAqB,GAAI,KAAI,gBAAgB,CAClE,QAAS,CAAC,mCAAoC,6BAG9C,UAAW,CAAC,SAVlB,QAAA,gCAAA",
  "names": []
}
