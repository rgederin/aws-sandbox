{
  "version": 3,
  "sources": ["messages.ts"],
  "sourcesContent": ["import { SynthesisMessage } from '../../../cx-api';\nimport { Messages } from './message';\nimport { formatFailure, matchSection } from './section';\n\nexport function findMessage(messages: Messages, constructPath: string, props: any = {}): { [key: string]: { [key: string]: any } } {\n  const section: { [key: string]: SynthesisMessage } = messages;\n  const result = matchSection(filterPath(section, constructPath), props);\n\n  if (!result.match) {\n    return {};\n  }\n\n  return result.matches;\n}\n\nexport function hasMessage(messages: Messages, constructPath: string, props: any): string | void {\n  const section: { [key: string]: SynthesisMessage } = messages;\n  const result = matchSection(filterPath(section, constructPath), props);\n\n  if (result.match) {\n    return;\n  }\n\n  if (result.closestResult === undefined) {\n    return 'No messages found in the stack';\n  }\n\n  handleTrace(result.closestResult.target);\n  return [\n    `Stack has ${result.analyzedCount} messages, but none match as expected.`,\n    formatFailure(result.closestResult),\n  ].join('\\n');\n}\n\n// We redact the stack trace by default because it is unnecessarily long and unintelligible.\n// If there is a use case for rendering the trace, we can add it later.\nfunction handleTrace(match: any, redact: boolean = true): void {\n  if (redact && match.entry?.trace !== undefined) {\n    match.entry.trace = 'redacted';\n  };\n}\n\nfunction filterPath(section: { [key: string]: SynthesisMessage }, path: string): { [key: string]: SynthesisMessage } {\n  // default signal for all paths is '*'\n  if (path === '*') return section;\n\n  return Object.entries(section ?? {})\n    .filter(([_, v]) => v.id === path)\n    .reduce((agg, [k, v]) => { return { ...agg, [k]: v }; }, {});\n}\n"],
  "mappings": "kHAEA,KAAA,WAAA,QAAA,aAEA,qBAA4B,SAAoB,cAAuB,MAAa,GAAE,CACpF,KAAM,SAA+C,SAC/C,OAAS,UAAA,aAAa,WAAW,QAAS,eAAgB,OAEhE,MAAK,QAAO,MAIL,OAAO,QAHL,GALX,QAAA,YAAA,YAWA,oBAA2B,SAAoB,cAAuB,MAAU,CAC9E,KAAM,SAA+C,SAC/C,OAAS,UAAA,aAAa,WAAW,QAAS,eAAgB,OAEhE,GAAI,QAAO,MAIX,MAAI,QAAO,gBAAkB,OACpB,iCAGT,aAAY,OAAO,cAAc,QAC1B,CACL,aAAa,OAAO,sDACpB,UAAA,cAAc,OAAO,gBACrB,KAAK;IAhBT,QAAA,WAAA,WAqBA,qBAAqB,MAAY,OAAkB,GAAI,QACrD,AAAI,QAAU,KAAA,MAAM,SAAK,MAAA,KAAA,OAAA,OAAA,GAAE,SAAU,QACnC,OAAM,MAAM,MAAQ,YAIxB,oBAAoB,QAA8C,KAAY,CAE5E,MAAI,QAAS,IAAY,QAElB,OAAO,QAAQ,SAAO,KAAP,QAAW,IAC9B,OAAO,CAAC,CAAC,EAAG,KAAO,EAAE,KAAO,MAC5B,OAAO,CAAC,IAAK,CAAC,EAAG,KAAgB,KAAK,KAAM,GAAI,IAAQ",
  "names": []
}
